<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-309VQ3SB23"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-309VQ3SB23');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>César Miguel Valdez Córdova</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Source+Serif+4:opsz,wght@8..60,300;8..60,400;8..60,500;8..60,600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Source Serif 4', Georgia, 'Times New Roman', serif;
            line-height: 1.7;
            color: #3D2222;
            background: #F5F1ED;
            background-image: radial-gradient(circle, #d5cdc4 0.8px, transparent 0.8px);
            background-size: 24px 24px;
        }

        /* ---- STICKY NAV ---- */
        .sticky-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            background: rgba(245, 241, 237, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(217, 204, 191, 0.6);
            transform: translateY(-100%);
            transition: transform 0.35s ease;
            padding: 0.6rem 1.5rem;
        }

        .sticky-nav.visible {
            transform: translateY(0);
        }

        .sticky-nav-inner {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .sticky-nav .nav-name {
            font-family: 'Space Mono', monospace;
            font-weight: 700;
            font-size: 0.85rem;
            color: #8B2E2E;
            white-space: nowrap;
        }

        .sticky-nav .nav-links {
            display: flex;
            gap: 1.25rem;
            flex-wrap: wrap;
        }

        .sticky-nav .nav-links a {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: #8B2E2E;
            text-decoration: none;
            border-bottom: none;
            position: relative;
        }

        .sticky-nav .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: #5eb89e;
            transition: width 0.25s ease;
        }

        .sticky-nav .nav-links a:hover::after {
            width: 100%;
        }

        .sticky-nav .nav-links a:hover {
            background: none;
        }

        /* ---- HERO ---- */
        .hero {
            max-width: 900px;
            margin: 0 auto;
            padding: 4rem 1.5rem 0;
            text-align: center;
        }

        h1 {
            font-family: 'Space Mono', monospace;
            font-size: 2.5rem;
            margin-bottom: 0.25rem;
            font-weight: 700;
            color: #8B2E2E;
            letter-spacing: -0.02em;
        }

        .subtitle {
            font-family: 'Space Mono', monospace;
            color: #8C6E60;
            font-size: 1rem;
            margin-bottom: 2.5rem;
            font-weight: 400;
            letter-spacing: 0.02em;
        }

        .ascii-viewport {
            max-width: 672px;
            width: 100%;
            margin: 0 auto 2.5rem;
        }

        #site-ascii {
            display: block;
            width: 100%;
            aspect-ratio: 672 / 252;
        }

        .bio {
            max-width: 680px;
            margin: 0 auto 2rem;
            line-height: 1.85;
            font-size: 1.08rem;
            text-align: justify;
            color: #3D2222;
        }

        .contact {
            margin-bottom: 2.5rem;
            text-align: center;
        }

        .contact-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.75rem;
        }

        .contact-links a {
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
            font-weight: 500;
            color: #8B2E2E;
            text-decoration: none;
            border-bottom: none;
            position: relative;
        }

        .contact-links a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: #5eb89e;
            transition: width 0.25s ease;
        }

        .contact-links a:hover::after {
            width: 100%;
        }

        .contact-links a:hover {
            background: none;
        }

        .contact .email {
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            color: #8C6E60;
        }

        /* ---- SECTIONS ---- */
        .section {
            padding: 3.5rem 1.5rem;
        }

        .section:nth-child(odd) {
            background: #F5F1ED;
            background-image: radial-gradient(circle, #d5cdc4 0.8px, transparent 0.8px);
            background-size: 24px 24px;
        }

        .section:nth-child(even) {
            background: #EDE7E0;
            background-image: radial-gradient(circle, #cec6bc 0.8px, transparent 0.8px);
            background-size: 24px 24px;
        }

        .section-inner {
            max-width: 900px;
            margin: 0 auto;
        }

        .section-header {
            display: flex;
            align-items: baseline;
            gap: 0.75rem;
            margin-bottom: 2rem;
        }

        .section-number {
            font-family: 'Space Mono', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: #d4a050;
            letter-spacing: 0.02em;
        }

        h2 {
            font-family: 'Space Mono', monospace;
            font-size: 1.4rem;
            font-weight: 700;
            color: #8B2E2E;
            letter-spacing: -0.01em;
        }

        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #D9CCBF, transparent);
            margin: 0;
        }

        /* ---- LINKS ---- */
        a {
            color: #5eb89e;
            text-decoration: none;
            border-bottom: none;
            position: relative;
            transition: color 0.2s ease;
        }

        a:hover {
            color: #4a9a84;
            background: none;
        }

        /* ---- PUBLICATION CARDS ---- */
        .pub-card {
            background: #FDFBF9;
            border-radius: 8px;
            padding: 1.25rem 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #5eb89e;
            box-shadow: 0 1px 4px rgba(61, 34, 34, 0.06);
            transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
            opacity: 0;
            transform: translateY(16px);
        }

        .pub-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .pub-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(61, 34, 34, 0.1);
            border-color: #4a9a84;
        }

        .pub-card .pub-title {
            font-family: 'Space Mono', monospace;
            font-weight: 600;
            font-size: 0.98rem;
            color: #8B2E2E;
            margin-bottom: 0.35rem;
            line-height: 1.5;
        }

        .pub-card .pub-title a {
            color: #8B2E2E;
            border-bottom: none;
        }

        .pub-card .pub-title a:hover {
            color: #5eb89e;
        }

        .pub-card .pub-meta {
            color: #8C6E60;
            font-size: 0.88rem;
            line-height: 1.6;
        }

        /* ---- GENERIC CARDS (open source, outreach) ---- */
        .card {
            background: #FDFBF9;
            border-radius: 8px;
            padding: 1.25rem 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 1px 4px rgba(61, 34, 34, 0.06);
            transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
            border: 1px solid transparent;
            opacity: 0;
            transform: translateY(16px);
        }

        .card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(61, 34, 34, 0.1);
            border-color: #5eb89e;
        }

        .card .card-title {
            font-family: 'Space Mono', monospace;
            font-weight: 600;
            font-size: 0.98rem;
            color: #8B2E2E;
            margin-bottom: 0.3rem;
            line-height: 1.5;
        }

        .card .card-title a {
            color: #8B2E2E;
        }

        .card .card-title a:hover {
            color: #5eb89e;
        }

        .card .card-meta {
            font-family: 'Space Mono', monospace;
            color: #d4a050;
            font-size: 0.78rem;
            margin-bottom: 0.5rem;
            font-weight: 400;
        }

        .card .card-body {
            font-size: 0.95rem;
            line-height: 1.7;
            color: #3D2222;
        }

        /* ---- REVIEWING (compact list) ---- */
        .review-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .review-list li {
            font-size: 0.95rem;
            line-height: 1.7;
            padding: 0.4rem 0;
            color: #3D2222;
            border-bottom: 1px solid rgba(217, 204, 191, 0.5);
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        .review-list li.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .review-list li:last-child {
            border-bottom: none;
        }

        /* ---- EDUCATION TIMELINE ---- */
        .timeline {
            position: relative;
            padding-left: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 6px;
            top: 8px;
            bottom: 8px;
            width: 2px;
            background: linear-gradient(180deg, #d4a050, #D9CCBF);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 2rem;
            padding-left: 0.5rem;
            opacity: 0;
            transform: translateY(16px);
        }

        .timeline-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 8px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 3px solid #d4a050;
            background: #F5F1ED;
        }

        .timeline-item.current::before {
            background: #d4a050;
        }

        .timeline-item .degree {
            font-family: 'Space Mono', monospace;
            font-weight: 600;
            font-size: 0.95rem;
            color: #8B2E2E;
        }

        .timeline-item .school {
            font-size: 0.92rem;
            color: #3D2222;
            margin-top: 0.15rem;
        }

        .timeline-item .extra {
            font-size: 0.88rem;
            color: #8C6E60;
            margin-top: 0.15rem;
        }

        /* ---- AFFILIATIONS GRID ---- */
        .affil-group {
            margin-bottom: 1.75rem;
            opacity: 0;
            transform: translateY(16px);
        }

        .affil-group.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .affil-label {
            font-family: 'Space Mono', monospace;
            font-weight: 700;
            font-size: 0.85rem;
            color: #d4a050;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            margin-bottom: 0.5rem;
        }

        .affil-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.4rem;
        }

        .affil-grid li,
        .affil-grid p {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #3D2222;
            list-style: none;
        }

        .affil-grid a {
            color: #5eb89e;
        }

        .affil-grid a:hover {
            color: #4a9a84;
        }

        /* ---- FOOTER ---- */
        .footer {
            text-align: center;
            padding: 2rem 1.5rem;
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: #8C6E60;
            background: #EDE7E0;
            background-image: radial-gradient(circle, #cec6bc 0.8px, transparent 0.8px);
            background-size: 24px 24px;
        }

        /* ---- FADE-IN ANIMATION ---- */
        .fade-in {
            opacity: 0;
            transform: translateY(16px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ---- RESPONSIVE ---- */
        @media (max-width: 768px) {
            .hero {
                padding-top: 3rem;
            }

            h1 {
                font-size: 2rem;
            }

            .section {
                padding: 2.5rem 1.25rem;
            }

            .pub-card {
                padding: 1rem 1.25rem;
            }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.6rem;
            }

            .subtitle {
                font-size: 0.88rem;
            }

            .bio {
                text-align: left;
                font-size: 1rem;
            }

            .contact-links {
                flex-direction: column;
                gap: 0.6rem;
            }

            .ascii-viewport {
                margin-left: -1.5rem;
                margin-right: -1.5rem;
                max-width: none;
                width: calc(100% + 3rem);
            }

            .sticky-nav .nav-links {
                gap: 0.75rem;
            }

            .sticky-nav .nav-links a {
                font-size: 0.7rem;
            }

            .pub-card {
                border-left-width: 3px;
                padding: 1rem;
            }

            .timeline {
                padding-left: 1.5rem;
            }

            .timeline::before {
                left: 4px;
            }

            .timeline-item::before {
                left: -1.5rem;
                width: 10px;
                height: 10px;
            }
        }

        @media (max-width: 380px) {
            h1 {
                font-size: 1.35rem;
            }

            .section {
                padding: 2rem 1rem;
            }

            .pub-card {
                border-left: none;
                border-top: 3px solid #5eb89e;
            }

            .sticky-nav {
                padding: 0.5rem 1rem;
            }

            .sticky-nav .nav-name {
                display: none;
            }
        }
    </style>
</head>
<body>

<!-- Sticky Nav -->
<nav class="sticky-nav" id="stickyNav">
    <div class="sticky-nav-inner">
        <span class="nav-name">CMVC</span>
        <div class="nav-links">
            <a href="#research">Research</a>
            <a href="#service">Service</a>
            <a href="#background">Background</a>
        </div>
    </div>
</nav>

<!-- Hero -->
<section class="hero" id="hero">
    <h1>César Miguel Valdez Córdova</h1>
    <p class="subtitle">PhD Student, Quantitative Life Sciences, Mila/McGill University</p>

    <div class="ascii-viewport">
        <canvas id="site-ascii"></canvas>
    </div>

    <div class="bio">
        <p>I study how structure emerges in learning systems, both biological and artificial. When we apply methods like dimensionality reduction or train neural networks on data, we're making implicit choices about what patterns matter. I'm interested in understanding how the shape of the data itself, its underlying geometry, guides these discoveries. I'm developing tools and frameworks for agentic AI systems that can reason geometrically about scientific data, learning to make principled analytical choices based on the intrinsic structure of the systems they're analyzing.</p>
    </div>

    <div class="contact">
        <div class="contact-links">
            <a href="https://github.com/cmvcordova">GitHub</a>
            <a href="https://www.linkedin.com/in/cmvcordova/">LinkedIn</a>
            <a href="https://scholar.google.com/citations?user=kI5hHesAAAAJ&hl=fr&oi=ao">Google Scholar</a>
        </div>
        <span class="email">cesar dot valdez at mila dot quebec</span>
    </div>
</section>

<div class="section-divider"></div>

<!-- 01 Research -->
<section class="section" id="research">
    <div class="section-inner">
        <div class="section-header fade-in">
            <span class="section-number">01</span>
            <h2>Publications</h2>
        </div>

        <div class="pub-card">
            <div class="pub-title"><a href="https://openreview.net/pdf/9e460fe75e0551745b308425a82c06d529005588.pdf">Measure Before You Look: Grounding Embeddings Through Manifold Metrics</a></div>
            <div class="pub-meta">César Miguel Valdez Córdova, et al. UniReps/NeurReps @ NeurIPS 2025</div>
        </div>

        <div class="pub-card">
            <div class="pub-title"><a href="#">PHATE Derived Ancestry Coordinates Can Effectively Capture Continuous Population Structure in Human Genomic Data</a></div>
            <div class="pub-meta">Matthew Scicluna, Shuang Ni, <strong>César Miguel Valdez Córdova</strong>, Jean-Christophe Grenier, Raphael Poujol, Kevin R. Moon, Guy Wolf, Sebastien Lemieux, Smita Krishnaswamy, Julie Hussin. ASHG 2025</div>
        </div>

        <div class="pub-card">
            <div class="pub-title"><a href="https://www.biorxiv.org/content/10.1101/2024.10.02.616248v1">Perteval-scfm: benchmarking single-cell foundation models for perturbation effect prediction</a></div>
            <div class="pub-meta">A Wenteler, M Occhetta, N Branson, M Huebner, V Curean, WT Dee, ... <strong>César Miguel Valdez Córdova</strong> (supervising author), et al. ICML 2025</div>
        </div>

        <div class="pub-card">
            <div class="pub-title"><a href="https://www.nature.com/articles/s41588-025-02441-6">Designing synthetic regulatory elements using the generative AI framework DNA-Diffusion</a></div>
            <div class="pub-meta">Lucas Ferreira DaSilva, Simon Senan, Zain Munir Patel, ... <strong>César Miguel Valdez Córdova</strong>, Aaron Wenteler, ... Luca Pinello, et al. <em>Nature Genetics</em> (2025)</div>
        </div>

        <div class="pub-card">
            <div class="pub-title"><a href="https://research.latinxinai.org/papers/icml/2024/pdf/Cesar_Valdez.pdf">Towards learning activity cliff-aware molecular representations</a></div>
            <div class="pub-meta">César Miguel Valdez Córdova. LatinX in AI (LXAI) @ ICML 2024</div>
        </div>

        <div class="section-header fade-in" style="margin-top: 3rem;">
            <span class="section-number">02</span>
            <h2 id="open-source">Open Source</h2>
        </div>

        <div class="card">
            <div class="card-title"><a href="https://github.com/latent-reasoning-works">Latent Reasoning Works</a></div>
            <div class="card-meta">Founder, Lead Developer</div>
            <div class="card-body">Developing frameworks for geometrically intelligent agentic systems. Building tools for reasoning about manifold structure and guiding scientific discovery through geometric profiling and principled workflow selection.</div>
        </div>

        <div class="card">
            <div class="card-title"><a href="https://github.com/mila-iqia/ResearchTemplate">Mila Research Template</a></div>
            <div class="card-meta">Contributor</div>
            <div class="card-body">Contributed to the development of Mila's official research template. Built the NLP module, remote launching with submitit/hydra, and code profiling infrastructure for seamless interaction with SLURM-managed cluster computing.</div>
        </div>

        <div class="section-header fade-in" style="margin-top: 3rem;">
            <span class="section-number">03</span>
            <h2 id="reviewing">Reviewing</h2>
        </div>

        <div class="affil-group">
            <div class="affil-label">2026</div>
            <ul class="review-list">
                <li>Learning Meaningful Representations of Life (LMRL) @ ICLR</li>
                <li>Geometry-grounded Representation Learning and Generative Modelling (GRaM) @ ICLR</li>
            </ul>
        </div>

        <div class="affil-group">
            <div class="affil-label">2025</div>
            <ul class="review-list">
                <li>UniReps @ NeurIPS</li>
                <li>Constrained Optimization for ML (COML) @ NeurIPS</li>
                <li>NewinML @ ICML</li>
                <li>Learning Meaningful Representations of Life (LMRL) @ ICLR</li>
            </ul>
        </div>
    </div>
</section>

<div class="section-divider"></div>

<!-- 04 Service -->
<section class="section" id="service">
    <div class="section-inner">
        <div class="section-header fade-in">
            <span class="section-number">04</span>
            <h2>Outreach &amp; Community</h2>
        </div>

        <div class="card">
            <div class="card-title"><a href="https://portal.valencelabs.com/multiomics-reading-group">Co-founder & Host, Multiomics Reading Group</a></div>
            <div class="card-meta">Mila, 2024–Present</div>
            <div class="card-body">Organized and moderated weekly reading group exploring representation learning in biological systems. Open to researchers worldwide, covering foundational papers and emerging work in computational biology.</div>
        </div>

        <div class="card">
            <div class="card-title"><a href="https://www.mcgill.ca/micm/about/student-organization">VP Academic Affairs, McGill Initiative in Computational Medicine (MiCM)</a></div>
            <div class="card-meta">McGill University, 2024–Present</div>
            <div class="card-body">Designed bioinformatics workshop materials, directed qualified instructors, organized and supervised workshop delivery. Conducted code reviews for workshop materials. Coordinated fundraising efforts to support computational medicine initiatives.</div>
        </div>

        <div class="card">
            <div class="card-title"><a href="https://mila.quebec/en/prospective-students-postdocs/student-life-and-resources/lab-representatives">Laboratory Representative, Mila Quebec AI Institute</a></div>
            <div class="card-meta">Mila, 2023–2025</div>
            <div class="card-body">Selected as Laboratory Representative (LabRep) to facilitate communication between students, postdocs, faculty, and staff. Organized assemblies, surveyed students on concerns, tracked proposals through to completion to enhance student involvement in decision-making.</div>
        </div>
    </div>
</section>

<div class="section-divider"></div>

<!-- 05 Background -->
<section class="section" id="background">
    <div class="section-inner">
        <div class="section-header fade-in">
            <span class="section-number">05</span>
            <h2 id="education">Education</h2>
        </div>

        <div class="timeline">
            <div class="timeline-item current">
                <div class="degree">Ph.D. in Quantitative Life Sciences</div>
                <div class="school">McGill University, Montréal, Québec, Canada (Sept. 2023 &ndash; Present)</div>
            </div>

            <div class="timeline-item">
                <div class="degree">M.Sc. in Artificial Intelligence <span style="font-weight: 400; font-size: 0.85rem;">(Life Sciences Track)</span></div>
                <div class="school">Johannes Kepler Universität Linz, Upper Austria, Austria (Grad. 2024)</div>
                <div class="extra">Exchange semester at <a href="https://www.polymtl.ca/etudiants-internationaux/en/international-thematic-clusters-engineering">Polytechnique Montréal</a>, Québec, Canada</div>
            </div>

            <div class="timeline-item">
                <div class="degree">M.Sc. in Computer Science</div>
                <div class="school">Ensenada Center for Scientific Research and Higher Education (CICESE), Baja California, México (Grad. 2020)</div>
            </div>

            <div class="timeline-item">
                <div class="degree">B.Sc. in Chemistry and Nanotechnology Engineering</div>
                <div class="school">Tec de Monterrey, Campus Monterrey, Nuevo León, México (Grad. 2016)</div>
            </div>
        </div>

        <div class="section-header fade-in" style="margin-top: 3rem;">
            <span class="section-number">06</span>
            <h2 id="affiliations">Affiliations</h2>
        </div>

        <div class="affil-group">
            <div class="affil-label">Current</div>
            <div class="affil-grid">
                <p>PhD Student, Quantitative Life Sciences, Mila/McGill University</p>
                <p>Future Forged Research Fellow (Biology), Amii (Alberta Machine Intelligence Institute)</p>
            </div>
        </div>

        <div class="affil-group">
            <div class="affil-label">Advisors</div>
            <div class="affil-grid">
                <p><a href="https://guywolf.org/">Guy Wolf</a>, Université de Montréal &amp; Mila</p>
                <p><a href="https://www.cs.mcgill.ca/~blanchem/">Mathieu Blanchette</a>, McGill University &amp; Mila</p>
            </div>
        </div>

        <div class="affil-group">
            <div class="affil-label">Thesis Committee</div>
            <div class="affil-grid">
                <p><a href="https://www.cs.mcgill.ca/~dprecup/">Doina Precup</a>, McGill University &amp; Mila</p>
                <p><a href="https://krishnaswamylab.org/">Smita Krishnaswamy</a>, Yale University &amp; Mila</p>
                <p><a href="https://ogephd.hms.harvard.edu/people/luca-pinello">Luca Pinello</a>, Massachusetts General Hospital &amp; Harvard Medical School</p>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="footer">
    &copy; 2025 César Miguel Valdez Córdova
</footer>

<!-- ASCII Animation (preserved exactly) -->
<script>
// ---- ASCII ANIMATION ----
(function() {
  const canvas = document.getElementById('site-ascii');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');

  const COLS = 56, ROWS = 14, CW = 12, CH = 18;
  const W = COLS * CW, H = ROWS * CH;
  const dpr = Math.min(window.devicePixelRatio || 1, 2);
  canvas.width = W * dpr;
  canvas.height = H * dpr;
  ctx.scale(dpr, dpr);

  const COL = {
    dot: '#c8bdb0',
    unknown: '#9a8a78',
    agent: '#c84040',
    reveal: '#3d9a80',
    conn: '#b87a28',
    fail: '#d04040',
    dim: '#b8a898',
    label: '#7a6a58'
  };

  const bgDots = [];
  for (let y = 0; y < ROWS; y++)
    for (let x = 0; x < COLS; x++)
      if (Math.random() < 0.08) bgDots.push({x, y, p: Math.random() * 6.28});

  const clusters = [
    { // Molecular structure (biology)
      cx:14, cy:7,
      nodes:[{dx:-1,dy:-1,c:'◎'},{dx:1,dy:-1,c:'○'},{dx:-1,dy:1,c:'△'},{dx:1,dy:1,c:'⬡'}],
      edges:[{dx:0,dy:-1,c:'─'},{dx:0,dy:1,c:'─'},{dx:-1,dy:0,c:'│'},{dx:1,dy:0,c:'│'}],
      bad:{dx:0,dy:0,c:'╳'}, state:'hidden', t:0
    },
    { // Latent embedding (geometry)
      cx:30, cy:7,
      nodes:[{dx:-3,dy:0,c:'α'},{dx:-1,dy:0,c:'β'},{dx:1,dy:0,c:'γ'},{dx:3,dy:0,c:'δ'}],
      edges:[{dx:-2,dy:0,c:'─'},{dx:0,dy:0,c:'─'},{dx:2,dy:0,c:'─'}],
      bad:{dx:0,dy:1,c:'│'}, state:'hidden', t:0
    },
    { // Manifold synthesis (bio + geometry)
      cx:46, cy:7,
      nodes:[{dx:0,dy:-2,c:'●'},{dx:-2,dy:0,c:'◇'},{dx:2,dy:0,c:'□'},{dx:0,dy:2,c:'◆'}],
      edges:[{dx:0,dy:-1,c:'│'},{dx:-1,dy:0,c:'─'},{dx:1,dy:0,c:'─'},{dx:0,dy:1,c:'│'},{dx:0,dy:0,c:'┼'}],
      bad:{dx:1,dy:-1,c:'╲'}, state:'hidden', t:0
    }
  ];

  let ax = 3, ay = 7, sx = 3, sy = 7;
  let frame = 0, pi = 0, pf = 0;

  const TL = [
    {type:'move', tx:11, ty:7, dur:70},
    {type:'perceive', ci:0, dur:55},
    {type:'model', ci:0, dur:150},
    {type:'commit', ci:0, dur:45},
    {type:'move', tx:27, ty:7, dur:70},
    {type:'perceive', ci:1, dur:55},
    {type:'model', ci:1, dur:150},
    {type:'commit', ci:1, dur:45},
    {type:'move', tx:43, ty:7, dur:70},
    {type:'perceive', ci:2, dur:55},
    {type:'model', ci:2, dur:150},
    {type:'commit', ci:2, dur:45},
    {type:'pause', dur:90},
  ];

  function ease(t) { return t < .5 ? 2*t*t : 1 - (-2*t+2)**2 / 2; }

  function draw(x, y, ch, col, a) {
    ctx.globalAlpha = a === undefined ? 1 : a;
    ctx.fillStyle = col;
    ctx.fillText(ch, x * CW + CW/2, y * CH + CH/2);
  }

  function tick() {
    const ph = TL[pi];
    const t = Math.min(pf / ph.dur, 1);
    if (ph.type === 'move') {
      ax = sx + (ph.tx - sx) * ease(t);
      ay = sy + (ph.ty - sy) * ease(t);
    } else if (ph.type !== 'pause') {
      const cl = clusters[ph.ci];
      cl.state = ph.type === 'commit' ? 'committing' : ph.type === 'perceive' ? 'perceiving' : 'modeling';
      cl.t = t;
    }
    pf++;
    if (pf >= ph.dur) {
      if (ph.type === 'move') { ax = ph.tx; ay = ph.ty; }
      if (ph.type === 'commit') clusters[ph.ci].state = 'done';
      pi++; pf = 0; sx = ax; sy = ay;
      if (pi >= TL.length) {
        pi = 0; ax = 3; ay = 7; sx = 3; sy = 7;
        clusters.forEach(c => { c.state = 'hidden'; c.t = 0; });
      }
    }
  }

  function paint() {
    ctx.clearRect(0, 0, W, H);
    ctx.font = '12px "Space Mono", monospace';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    bgDots.forEach(d => {
      draw(d.x, d.y, '·', COL.dot, .2 + Math.sin(frame * .012 + d.p) * .08);
    });

    const gx = ax * CW + CW/2, gy = ay * CH + CH/2;
    const gr = ctx.createRadialGradient(gx, gy, 0, gx, gy, 55);
    gr.addColorStop(0, 'rgba(200,64,64,0.1)');
    gr.addColorStop(1, 'rgba(200,64,64,0)');
    ctx.globalAlpha = 1;
    ctx.fillStyle = gr;
    ctx.beginPath();
    ctx.arc(gx, gy, 55, 0, Math.PI * 2);
    ctx.fill();

    clusters.forEach(cl => {
      const {cx, cy, nodes, edges, bad, state, t} = cl;

      if (state === 'hidden') {
        nodes.forEach(n => {
          const d = Math.hypot(ax - (cx + n.dx), ay - (cy + n.dy));
          if (d < 6) {
            const jx = Math.sin(frame * .1 + n.dx * 3) * .15;
            const jy = Math.cos(frame * .13 + n.dy * 3) * .15;
            draw(cx + n.dx + jx, cy + n.dy + jy, '?', COL.unknown, Math.max(0, 1 - d/6) * .5);
          }
        });
      }
      else if (state === 'perceiving') {
        nodes.forEach((n, i) => {
          const delay = i / nodes.length * .4;
          const p = Math.max(0, Math.min(1, (t - delay) / .5));
          if (p < .5) draw(cx + n.dx, cy + n.dy, '?', COL.unknown, 1 - p * 2);
          if (p > 0) draw(cx + n.dx, cy + n.dy, n.c, COL.reveal, Math.min(p * 2, 1));
        });
      }
      else if (state === 'modeling') {
        if (t < .2) {
          nodes.forEach(n => draw(cx + n.dx, cy + n.dy, n.c, COL.reveal));
          const a1 = t / .2;
          draw(cx + bad.dx, cy + bad.dy, bad.c, COL.conn, a1);
          edges.slice(0, Math.ceil(edges.length / 2)).forEach((e, i) => {
            const p = Math.max(0, (a1 - i * .25) / .5);
            if (p > 0) draw(cx + e.dx, cy + e.dy, e.c, COL.conn, Math.min(p, 1));
          });
        }
        else if (t < .32) {
          const f = (t - .2) / .12;
          const nodeCol = f < .4 ? COL.fail : COL.reveal;
          const nodeA = f < .4 ? 1 : (.6 + Math.sin(f * 8) * .2);
          nodes.forEach(n => draw(cx + n.dx, cy + n.dy, n.c, nodeCol, nodeA));
          draw(cx + bad.dx, cy + bad.dy, '✗', COL.fail, Math.max(.3, 1 - f * .5));
          edges.slice(0, Math.ceil(edges.length / 2)).forEach(e => {
            draw(cx + e.dx, cy + e.dy, e.c, COL.fail, Math.max(0, .8 - f));
          });
        }
        else if (t < .55) {
          const r = (t - .32) / .23;
          nodes.forEach((n, i) => {
            const flicker = .35 + Math.sin(frame * .15 + i * 2.1) * .25;
            const col = r < .3 ? COL.unknown : COL.reveal;
            draw(cx + n.dx, cy + n.dy, n.c, col, flicker);
          });
        }
        else {
          nodes.forEach(n => draw(cx + n.dx, cy + n.dy, n.c, COL.reveal));
          const a2 = (t - .55) / .45;
          edges.forEach((e, i) => {
            const delay = i / edges.length * .5;
            const p = Math.max(0, Math.min(1, (a2 - delay) / .35));
            if (p > 0) draw(cx + e.dx, cy + e.dy, e.c, COL.conn, p);
          });
        }
      }
      else if (state === 'committing') {
        const glow = t < .3 ? 1 : Math.max(.45, 1 - (t - .3) * .8);
        const col = t < .6 ? COL.agent : COL.dim;
        nodes.forEach(n => draw(cx + n.dx, cy + n.dy, n.c, col, glow));
        edges.forEach(e => draw(cx + e.dx, cy + e.dy, e.c, col, glow * .8));
        if (t > .35) {
          const checkY = nodes.some(n => n.dy === 2) ? 4 : 3;
          draw(cx, cy + checkY, '✓', COL.agent, Math.min(1, (t - .35) / .25));
        }
      }
      else if (state === 'done') {
        nodes.forEach(n => draw(cx + n.dx, cy + n.dy, n.c, COL.dim, .45));
        edges.forEach(e => draw(cx + e.dx, cy + e.dy, e.c, COL.dim, .35));
        const checkY = nodes.some(n => n.dy === 2) ? 4 : 3;
        draw(cx, cy + checkY, '✓', COL.dim, .35);
      }
    });

    const pulse = .85 + Math.sin(frame * .06) * .15;
    draw(Math.round(ax), Math.round(ay), '@', COL.agent, pulse);

    const ph = TL[pi];
    if (ph && (ph.type === 'perceive' || ph.type === 'model' || ph.type === 'commit')) {
      const t = Math.min(pf / ph.dur, 1);
      let label, labelCol;
      if (ph.type === 'model' && t >= .2 && t < .32) {
        label = '✗ misfit'; labelCol = COL.fail;
      } else if (ph.type === 'model' && t >= .32 && t < .55) {
        label = 're-embedding...'; labelCol = COL.unknown;
      } else {
        label = {perceive:'observing...', model:'embedding...', commit:'mapped ✓'}[ph.type];
        labelCol = COL.label;
      }
      ctx.globalAlpha = Math.min(.7, pf / 15 * .7);
      ctx.fillStyle = labelCol;
      ctx.font = '9px "Space Mono", monospace';
      ctx.fillText(label, Math.round(ax) * CW + CW/2, (Math.round(ay) - 2) * CH + CH/2);
      ctx.globalAlpha = 1;
    }

    frame++;
  }

  function loop() { tick(); paint(); requestAnimationFrame(loop); }
  document.fonts.ready.then(loop);
})();
</script>

<!-- Sticky Nav + Scroll Animations -->
<script>
(function() {
  // Sticky nav: show after scrolling past hero
  const stickyNav = document.getElementById('stickyNav');
  const hero = document.getElementById('hero');

  function updateNav() {
    if (!hero || !stickyNav) return;
    const heroBottom = hero.getBoundingClientRect().bottom;
    if (heroBottom < 0) {
      stickyNav.classList.add('visible');
    } else {
      stickyNav.classList.remove('visible');
    }
  }

  window.addEventListener('scroll', updateNav, { passive: true });
  updateNav();

  // Scroll fade-in with IntersectionObserver
  const fadeTargets = document.querySelectorAll('.pub-card, .card, .fade-in, .timeline-item, .review-list li, .affil-group');

  if ('IntersectionObserver' in window) {
    const observer = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry, i) {
        if (entry.isIntersecting) {
          // Stagger siblings
          const parent = entry.target.parentElement;
          const siblings = Array.from(parent.children).filter(function(el) {
            return fadeTargets.length && (el.classList.contains('pub-card') || el.classList.contains('card') || el.classList.contains('timeline-item') || el.classList.contains('fade-in') || el.tagName === 'LI' || el.classList.contains('affil-group'));
          });
          const idx = siblings.indexOf(entry.target);
          const delay = Math.max(0, idx) * 80;

          setTimeout(function() {
            entry.target.classList.add('visible');
          }, delay);

          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });

    fadeTargets.forEach(function(el) {
      observer.observe(el);
    });
  } else {
    // Fallback: show everything immediately
    fadeTargets.forEach(function(el) {
      el.classList.add('visible');
    });
  }
})();
</script>

</body>
</html>
